Machine translated from Chinese version

# Project Description
- Milk-V Duo is an ultra-compact embedded development platform based on the CV1800B chip. It can run Linux and RTOS, providing a reliable, low-cost and high-performance platform for professionals, industrial ODM manufacturers, AIoT enthusiasts, DIY enthusiasts and creators.

<br>

# SDK directory structure
```
├── build // Compilation directory, storing compilation scripts and differentiated configurations of each board
├── build_milkv.sh // Milk-V Duo one-click compilation script
├── buildroot-2021.05 // buildroot open source tool
├── freertos // freertos system
├── fsbl // fsbl boot firmware, exists in prebuilt form
├── install // After performing a complete compilation, temporarily store each image path
├── isp_tuning // Image effect tuning parameter storage path
├── linux_5.10 // open source linux kernel
├── middleware // Self-developed multimedia framework, including so and ko
├── milkv // Directory for storing Milk-V Duo related configuration and script files
├── opensbi // open source opensbi library
├── out // The directory where the final SD card burning image generated by Milk-V Duo is located
├── ramdisk // Store the prebuilt directory of the minimum file system
└── u-boot-2021.10 // open source uboot code
```

<br>

# quick start

## Prepare the compilation environment
- Use a local Ubuntu system, `Ubuntu 20.04 LTS` is recommended (you can also use an Ubuntu system in a virtual machine, Ubuntu installed in WSL in Windows, or an Ubuntu system based on Docker)
- Install serial tools: `mobarXterm` or `Xshell` or others
- Install the tools that compile dependencies:
```
sudo apt install pkg-config build-essential ninja-build automake autoconf libtool wget curl git gcc libssl-dev bc slib squashfs-tools android-sdk-libsparse-utils android-sdk-ext4-utils jq python3-distutils tclsh scons parallel ssh- client tree python3-dev python3-pip device-tree-compiler ssh cpio fakeroot libncurses5 flex bison libncurses5-dev genext2fs rsync unzip dosfstools mtools
```
Note: The minimum version of `cmake` requires `3.16.5`

Check the version number of `cmake` in the system
```
cmake --version
```
The current version number of cmake installed with apt in `Ubuntu 20.04` is
```
cmake version 3.16.3
```
Does not meet the minimum requirements of this SDK, you need to manually install the latest `3.26.4` version
```
wget https://github.com/Kitware/CMake/releases/download/v3.26.4/cmake-3.26.4-linux-x86_64.sh
chmod +x cmake-3.26.4-linux-x86_64.sh
sudo ./cmake-3.26.4-linux-x86_64.sh --skip-license --prefix=/usr/local/
```
The manually installed `cmake` is in `/usr/local/bin`. At this time, use the `cmake --version` command to view its version number, which should be
```
cmake version 3.26.4
```

## Get the SDK
```
git clone https://github.com/milkv-duo/duo-buildroot-sdk.git
```

## One-click compilation
- Execute the one-click compilation script `build_milkv.sh`
```
cd duo-buildroot-sdk/
./build_milkv.sh
```
- After the compilation is successful, you can see the generated SD card burning image `milkv-duo-XXX.img` in the `out` directory

*Note: The first compilation will automatically download the required toolchain, which is about 840M in size. After downloading, it will be automatically decompressed to the `host-tools` directory under the SDK directory. It will be detected that `host-tools` already exists during the next compilation `directory, it will not be downloaded again*

## SD card burning

> Note: Writing the image to the TF card will erase the original data in the card, remember to back up important data before burning!!!
- Under Windows, use tools such as `balenaEtcher` or `Rufus` or `Win32 Disk Imager` to write the generated image to the TF card
- Under Linux, use the `dd` command to write the generated image to the TF card, **Please be sure to carefully confirm that the `of` device `/dev/sdX` is the TF card to be burned**
   ```
   sudo dd if=milkv-duo-XXX.img of=/dev/sdX
   ```

## boot
- Insert the TF card with burned image into the TF card slot of Milk-V Duo
- Connect the serial cable
- Power on the platform, Duo will boot into the system normally
- You can see the boot log in the serial port tool. After entering the system, you can log in to the terminal through the serial port and execute related commands under Linux

<br>

# Frequently Asked Questions

1. Why only single core is displayed?

    The CV1800B chip adopts a dual-core design. The current Linux system runs on one of the cores, and the other core is used to run the real-time system. The SDK of this core has not yet been released and will be updated later.

2. Why does checking RAM only show 28M?

    Because a part of RAM is allocated [ION](https://github.com/milkv-duo/duo-buildroot-sdk/blob/develop/build/boards/default/dts/cv180x/cv180x_default_memmap.dtsi#L15) , you can modify the value of this [ION_SIZE](https://github.com/milkv-duo/duo-buildroot-sdk/blob/develop/build/boards/cv180x/cv1800b_milkv_duo_sd/memmap.py#L43) and recompile Generate firmware.

<br>

# About Milk-V

- [Official Website](https://milkv.io/)

<br>

# technology Forum
- [MilkV Community](https://community.milkv.io/)
